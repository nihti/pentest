# MuIstiinpanot luennolta #6

  - Advanced Persistent Threat (APT) [https://blog.nettitude.com/uk/apt-testing](https://blog.nettitude.com/uk/apt-testing)
  - Niklas (esitelmöijä) kirjoittanut gradun kalasteluviesteistä
    - Vierailijaluennon muistiinpanot oman otsikkonsa alla
  - Salasanat kannattaa murtaa näytönohjaimella
  - WPS helppo murtaa langattomissa 
  - Eri merkkijonoista tulee sama tiiviste, tiivisteitä tulee 
  - Applied cryptocraphy 
    - O´Reilly: [https://learning.oreilly.com/library/view/applied-cryptography-protocols/9781119096726/](https://learning.oreilly.com/library/view/applied-cryptography-protocols/9781119096726/)
    - Adlibris: [https://www.adlibris.com/fi/kirja/applied-cryptography-9781119096726](https://www.adlibris.com/fi/kirja/applied-cryptography-9781119096726)
  - Linux perusteita: alt+piste edellinen tiedosto 

## Tehtävä tunnilla: kokeile murtaa tiiviste hashcatilla 

```bash
hashcat --help|less
hashcat --example-hashes
# tarjoaa kolme arvausta:
hashid '$idtiiviste'
hashid --help
# mode
hashid -m 
```

Aloitetaan menemällä Johns kansioon mihin oli käyty aiemmin shadow ja passwd tiedostot Metasploitablesta.
[https://resources.infosecinstitute.com/topic/hashcat-tutorial-beginners/](https://resources.infosecinstitute.com/topic/hashcat-tutorial-beginners/)

```bash
# otetaan käyttäjän root salasana 
└─$ hashid -m '$1$/avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.:14747:0:99999:7:::'
Analyzing '$1$/avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.:14747:0:99999:7:::'
[+] MD5 Crypt [Hashcat Mode: 500]
[+] Cisco-IOS(MD5) [Hashcat Mode: 500]
[+] FreeBSD MD5 [Hashcat Mode: 500]
# etsitään wordlist
locate wordlists 
/usr/share/dirb/wordlists/small.txt
/usr/share/amass/wordlists/all.txt
wc -l tiedosto.txt
locate teidosto.txt
# katsotaan 
hashcat -m 0 -a 0 -o catburglar.txt rootshadow.txt /usr/share/amass/wordlists/all.txt  
Hashfile 'rootshadow.txt' on line 1 (avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.): Token length exception
No hashes loaded.
```

Kokeiltiin useammassa muodossa antaa hashed pw (avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.), mutta ei onnistu. Jatketaan tunnin jälkeen. 
Suolaus jotenkin sotkee. 

```bash
# luodaan tiiviste 
┌──(kali㉿kali)-[~/johns]
└─$ echo -n "root" | md5sum 
63a9f0ea7bb98050796b649e85481845
# tallennetaan varjo-tiedostoon
└─$ hashcat -m 0 -a 0 -o catburglar.txt varjo /usr/share/amass/wordlists/all.txt 
# rupeaa krkäkkäämään mutta...
ATTENTION! Pure (unoptimized) backend kernels selected.
Using pure kernels enables cracking longer passwords but for the price of drastically reduced performance.
If you want to switch to optimized backend kernels, append -O to your commandline.
See the above message to find out about the exact limits.
# tuloste
hashcat --stdout 
# erilaisia sääntöjä voi luoda .rule tiedostoihin
```

## Kotitehtävien läpikäynti

FoxyProxy 
  - Pattern 
    - HUD vaatii omat asetuksensa, sehän jo tehtävää tehdessä huomattiin, pelkkä zapCallbackUrl ei riittänyt wildcardien väliin, zap toimi
  - Koneet tosiaan spawnaavat väärään osoiteavaruuteen, asia pitää varmistaa vielä HtB:n asiakaspalvelusta ennen hyökkäilyn aloittamista sääntöjen kieltämiin osoitteisiin. Onpa kivaa olla oikeassa. 
  - Tässä vaiheessa yleisöllekin huomiona, että Nessuksen asiakaspalvelu oli muuten yhteydessä rekisteröitymisen osalta, kts. "Via dolorosa, Nessuksen asentaminen"
    - Pitää lisätä sekä Nessuksen että HtB:n asiakaspalveluiden yhteydenotot myöhemmin oppimispäiväkirjaan



